<!-- 
Contains the login-element
 -->

<link rel="import" href="../js/bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../js/bower_components/core-icons/core-icons.html">
<link rel="import" href="../js/bower_components/paper-elements/paper-elements.html">

<polymer-element name="logout-element" attributes="csrfHeader">
<template>
<core-ajax id="logoutEndpoint" 
           url="/logout"
           headers="{{csrfHeader}}"
	       handleAs="json" 
	       method="POST" 
	       on-core-response="{{logoutResponse}}"
	       on-core-error="{{logoutError}}"></core-ajax>
<paper-toast id="errorToast" text="Service Error!"></paper-toast>
    <core-icon-button icon="arrow-forward" id="logoutButton" on-click="{{logout}}">logout</core-icon-button>
</template>
<script>
    Polymer({
        logout: function() {
     	    this.$.logoutEndpoint.go();
        },
        logoutResponse: function() {
        	this.fire("logout");
        },
        logoutError: function() {
    	    this.$.errorToast.text="Logout Service Error";
    	    this.$.errorToast.show();
        }
  });
</script>
</polymer-element>
